---
import type { BlockContent } from "@/entities/blockContent/model/type";
import { GetBlogsWithLimit } from "@/entities/blog/model/queries";
import type { CallToAction } from "@/entities/callToAction/model/type";

import { GetContacts } from "@/entities/contact/model/queries";
import { GetPage } from "@/entities/page/model/queries";

// import Highlight from "@/features/Blog/ui/Highlight.astro";
import Main from "@/features/Blog/ui/Main.astro";

import MainLayout from "@/widgets/MainLayout/index.astro";
import Intro from "@/widgets/Intro.astro";
import ClickToAction from "@/widgets/ClickToAction.astro";

const page = await GetPage({ name: "blog" });
const contacts = await GetContacts();
const blogs = await GetBlogsWithLimit({ limit: 6 });

const hero = page.content[0] as BlockContent;
// const highlight = page.content[1] as BlockContent;
const main = page.content[2] as BlockContent;
const cta = page.content[3] as CallToAction;
---

<MainLayout
  title={page.title}
  keyword={page.keyword}
  description={page.description}
  contacts={contacts}
>
  <Intro data={hero} />
  <!-- TODO: Phase 2 - Top Blog List -->
  <!-- <Highlight data={highlight} latestBlogs={blogs.slice(0, 2)} /> -->
  <Main data={main} blogs={blogs} />
  <ClickToAction data={cta} />
</MainLayout>
