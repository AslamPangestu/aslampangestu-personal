---
import type { BlockContent } from "@/entities/blockContent/model/type";
import { GetContacts } from "@/entities/contact/model/queries";
import { GetPage } from "@/entities/page/model/queries";
import { GetSkills } from "@/entities/skill/model/queries";

import Welcome from "@/features/Homepage/ui/Welcome.astro";
import AboutMe from "@/features/Homepage/ui/AboutMe.astro";
import Portofolio from "@/features/Homepage/ui/Portofolio.astro";
import Blog from "@/features/Homepage/ui/Blog.astro";

import MainLayout from "@/widgets/MainLayout/index.astro";
import ClickToAction from "@/widgets/ClickToAction.astro";

const page = await GetPage({ name: "homepage" });
const skills = await GetSkills();
const contacts = await GetContacts();

const hero = page.content[0] as BlockContent;
const aboutMe = page.content[1] as BlockContent;
const portofolio = page.content[2] as BlockContent;
const blog = page.content[3] as BlockContent;
---

<MainLayout
  title={page.title}
  keyword={page.keyword}
  description={page.description}
  contacts={contacts}
>
  <Welcome data={hero} skills={skills} />
  <AboutMe data={aboutMe} contacts={contacts} />
  <Portofolio data={portofolio} />
  <Blog data={blog} />
  <ClickToAction data={page.content[4]} />
</MainLayout>
